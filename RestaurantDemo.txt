class Restaurant {

    private boolean orderPlaced = false;
    private boolean foodPrepared = false;

    
    public synchronized void placeOrder() {
        System.out.println("Customer: Placing order...");
        orderPlaced = true;
        notifyAll(); 

        while (!foodPrepared) {
            try {
                wait(); // wait until food is prepared
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println("Customer: Food received. Eating...");
    }

   
    public synchronized void prepareFood() {
        while (!orderPlaced) {
            try {
                wait(); 
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println("Cook: Preparing food...");
        try {
            Thread.sleep(2000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        foodPrepared = true;
        System.out.println("Cook: Food is ready.");
        notifyAll(); 
    }

    
    public synchronized void serveFood() {
        while (!foodPrepared) {
            try {
                wait();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
        System.out.println("Waiter: Serving food to customer.");
    }
}


class Customer extends Thread {
    Restaurant restaurant;

    Customer(Restaurant r) {
        this.restaurant = r;
        setName("Customer");
    }

    public void run() {
        restaurant.placeOrder();
    }
}

class Cook extends Thread {
    Restaurant restaurant;

    Cook(Restaurant r) {
        this.restaurant = r;
        setName("Cook");
    }

    public void run() {
        restaurant.prepareFood();
    }
}

class Waiter extends Thread {
    Restaurant restaurant;

    Waiter(Restaurant r) {
        this.restaurant = r;
        setName("Waiter");
    }

    public void run() {
        restaurant.serveFood();
    }
}


public class RestaurantDemo {
    public static void main(String[] args) {

        Restaurant restaurant = new Restaurant();

        Customer customer = new Customer(restaurant);
        Cook cook = new Cook(restaurant);
        Waiter waiter = new Waiter(restaurant);

        cook.start();
        waiter.start();
        customer.start();
    }
}
